DROP TABLE ELECTION;
DROP TABLE CANDIDATE;
DROP TABLE PARTY;
DROP TABLE USER;
DROP TABLE ELECTORAL_SECTION;
DROP TABLE COUNTY;
DROP TABLE DISTRICT_FEDERAL;

CREATE TABLE DISTRICT_FEDERAL (
    ID_DF INT(10) PRIMARY KEY AUTO_INCREMENT,
    ACRONYM_DF VARCHAR(2) NOT NULL,
    CONSTRAINT UK_ACRONYM_DF UNIQUE(ACRONYM_DF)
);

INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('SP');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('MG');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('RJ');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('RS');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('BA');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('CE');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('ES');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('GO');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('AM');
INSERT INTO conscious.DISTRICT_FEDERAL (ACRONYM_DF) VALUES ('RN');

CREATE TABLE COUNTY (
    ID_COUNTY INT(10) PRIMARY KEY AUTO_INCREMENT,
    COUNTY_NAME VARCHAR(40) NOT NULL UNIQUE,
    ID_DF INT(10) NOT NULL UNIQUE,
    CONSTRAINT FK_ID_DF FOREIGN KEY(ID_DF) REFERENCES DISTRICT_FEDERAL(ID_DF) ON UPDATE CASCADE
);

INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (1, 'SÃO JOSÉ DOS CAMPOS');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (2, 'SÃO TOMÉ DAS LETRAS');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (3, 'DUQUE DE CAXIAS');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (4, 'PORTO ALEGRE');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (5, 'XIQUE-XIQUE');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (6, 'FORTALEZA');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (7, 'VITÓRIA'); 
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (8, 'ANÁPOLIS');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (9, 'MANAUS');
INSERT INTO conscious.COUNTY (ID_DF, COUNTY_NAME) VALUES (10, 'NATAL');

CREATE TABLE ELECTORAL_SECTION (
    ID_ELECTORAL_SECTION INT(10) PRIMARY KEY AUTO_INCREMENT,
    ISSUE_DATE DATE NOT NULL,
    ELECTORAL_AREA VARCHAR(15) NOT NULL UNIQUE,
    ELECTORAL_SECTION VARCHAR(15) NOT NULL UNIQUE,
    ID_COUNTY INT(10) NOT NULL UNIQUE,
    CONSTRAINT FK_ID_COUNTY FOREIGN KEY(ID_COUNTY) REFERENCES COUNTY(ID_COUNTY) ON UPDATE CASCADE
);

INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '001', '0011', 1);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '002', '0022', 2);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '003', '0033', 3);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '004', '0044', 4);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '005', '0055', 5);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '007', '0077', 6);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '008', '0088', 7); 
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '009', '0099', 8);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '010', '1010', 9);
INSERT INTO conscious.ELECTORAL_SECTION (ISSUE_DATE, ELECTORAL_AREA, ELECTORAL_SECTION, ID_COUNTY) VALUES ('2018-01-01', '011', '1111', 10);

CREATE TABLE USER (
    ID_USER INT(15) PRIMARY KEY AUTO_INCREMENT,
    USER_NAME VARCHAR(40) NOT NULL,
    BORN_DATE DATE NOT NULL,
    PASSWORD VARCHAR(20) NOT NULL,
    INSCRIPTION_NUMBER VARCHAR(15) NOT NULL,
    USER_TYPE varchar(20),
    ENABLED BOOLEAN NOT NULL,
    VOTED BOOLEAN NOT NULL,
    ID_ELECTORAL_SECTION INT(10) NOT NULL,
    CONSTRAINT UK_INSCRIPTION_NUMBER UNIQUE(INSCRIPTION_NUMBER),
    CONSTRAINT FK_ELECTORAL_SECTION FOREIGN KEY(ID_ELECTORAL_SECTION) REFERENCES ELECTORAL_SECTION(ID_ELECTORAL_SECTION) ON UPDATE CASCADE,
    CONSTRAINT CK_USER_TYPE CHECK(USER_TYPE IN ('ELEITOR', 'MESARIO', 'CHEFESECAO'))
);

INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('MARIA FERREIRA', '1995-09-30', '191918182929', '191918182929', 'ELEITOR', FALSE, FALSE, 1);
INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('JOSÉ CARLOS', '1995-08-30', '101029293848', '101029293848', 'ELEITOR', FALSE, FALSE, 1);
INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('ANA CLARA', '1995-07-30', '282847573848', '282847573848', 'ELEITOR', FALSE, FALSE, 1);
INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('JOANA OLIVEIRA', '1995-06-30', '9495968703994', '9495968703994', 'ELEITOR', FALSE, FALSE, 1);
INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('ANA CLARA', '1995-07-30', '586970495867', '586970495867', 'ELEITOR', FALSE, FALSE, 1);
INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('EDUARDO CAMPOS', '1995-02-28', '384859693040', '384859693040', 'MESARIO', FALSE, FALSE, 1);
INSERT INTO conscious.USER (USER_NAME, BORN_DATE, PASSWORD, INSCRIPTION_NUMBER, USER_TYPE, ENABLED, VOTED, ID_ELECTORAL_SECTION) VALUES ('HELENA PATRICIO', '1995-04-30', '475738284959', '475738284959', 'CHEFESECAO', FALSE, FALSE, 1);

CREATE TABLE PARTY (
    ID_PARTY INT(15) PRIMARY KEY AUTO_INCREMENT,
    PARTY_NUMBER INT(15) NOT NULL,
    PARTY_NAME VARCHAR(40) NOT NULL,
    CONSTRAINT UK_PARTY_NUMBER UNIQUE(PARTY_NUMBER)
);

INSERT INTO conscious.PARTY (PARTY_NUMBER, PARTY_NAME) VALUES (77, 'CHMOD');
INSERT INTO conscious.PARTY (PARTY_NUMBER, PARTY_NAME) VALUES (88, 'XPTO');
INSERT INTO conscious.PARTY (PARTY_NUMBER, PARTY_NAME) VALUES (66, 'CHUNKS');

CREATE TABLE CANDIDATE (
    ID_CANDIDATE INT(15) PRIMARY KEY AUTO_INCREMENT,
    CANDIDATE_NUMBER INT(15) NOT NULL,
    CANDIDATE_NAME VARCHAR(40) NOT NULL,
    CANDIDATE_URL_PHOTO VARCHAR(30) NOT NULL,
    ID_PARTY INT(15) NOT NULL,
    CONSTRAINT UK_CANDIDATE_NUMBER UNIQUE(CANDIDATE_NUMBER),
    CONSTRAINT FK_ID_PARTY FOREIGN KEY(ID_PARTY) REFERENCES PARTY(ID_PARTY) ON UPDATE CASCADE
);

INSERT INTO conscious.CANDIDATE (CANDIDATE_NUMBER, CANDIDATE_NAME, CANDIDATE_URL_PHOTO, ID_PARTY) VALUES (777, 'EMANOEL SILVA', 'https://bit.ly/2JR7u7P', 1);
INSERT INTO conscious.CANDIDATE (CANDIDATE_NUMBER, CANDIDATE_NAME, CANDIDATE_URL_PHOTO, ID_PARTY) VALUES (888, 'HELENA SANTOS', 'https://bit.ly/2JR7u7P', 2);
INSERT INTO conscious.CANDIDATE (CANDIDATE_NUMBER, CANDIDATE_NAME, CANDIDATE_URL_PHOTO, ID_PARTY) VALUES (555, 'ANTÔNIA LOURENÇO', 'https://bit.ly/2JR7u7P', 3);

CREATE TABLE ELECTION (
    ID_ELECTION INT(15) PRIMARY KEY AUTO_INCREMENT,
    ID_CANDIDATE INT(15) NULL REFERENCES CANDIDATE(ID_CANDIDATE),
    ID_PARTY INT(15) NOT NULL REFERENCES PARTY(ID_PARTY),
    QUANTITY_VOTES INT(10),
    CONSTRAINT FK_ID_CANDIDATE_ELECTION FOREIGN KEY(ID_CANDIDATE) REFERENCES CANDIDATE(ID_CANDIDATE) ON UPDATE CASCADE,
    CONSTRAINT FK_ID_PARTY_ELECTION FOREIGN KEY(ID_PARTY) REFERENCES PARTY(ID_PARTY) ON UPDATE CASCADE,
    CONSTRAINT UK_ID_CANDIDATE UNIQUE(ID_CANDIDATE),
    CONSTRAINT UK_ID_PARTY UNIQUE(ID_PARTY)
);

INSERT INTO conscious.ELECTION (ID_CANDIDATE, ID_PARTY, QUANTITY_VOTES) VALUES (1, 1, 0);
INSERT INTO conscious.ELECTION (ID_CANDIDATE, ID_PARTY, QUANTITY_VOTES) VALUES (2, 2, 0);
INSERT INTO conscious.ELECTION (ID_CANDIDATE, ID_PARTY, QUANTITY_VOTES) VALUES (3, 3, 0);